<!DOCTYPE html>
<html>
    <head>
        <title> Infrastructure under the Magnifying Glass</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">root</a></span>
                            </li>
                                                    <li>
                                
                            </li>
                                                    <li>
                                <span><a href="2015-Agile-Testing-Days_102170862.html">2015 Agile Testing Days</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                             Infrastructure under the Magnifying Glass
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> Tim Steffens</span>, last modified on Nov 13, 2015
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p class="p1"><span class="s1"><a href="http://www.agiletestingdays.com/session/infrastructure-under-the-magnifying-glass/" class="external-link" rel="nofollow">http://www.agiletestingdays.com/session/infrastructure-under-the-magnifying-glass/</a></span></p><p class="p1"><span class="s2">Example Project: DilloJs <span class="s3"><a href="https://github.com/butjar/dillojs" class="external-link" rel="nofollow">https://github.com/butjar/dillojs</a></span></span></p><ul class="ul1"><li>There are tools like <span class="s3"><a class="external-link" href="http://kitchen.ci/" rel="nofollow">kitchen</a> and </span><a class="external-link" href="http://rspec.info/documentation/" rel="nofollow">rspec</a> to automate the tests for your infrastructure code (on integration level)</li><li>Unit Tests for deployment scripts make sense as well! (As soon as there are conditions &amp; branches)</li><li class="li3"><span class="s4">Chef </span><span style="line-height: 1.42857;">Tools for Unit Test</span></li><ul class="ul2"><ul class="ul3"><li class="li3"><span class="s4">Foodcritic</span></li><li class="li3"><span class="s4">rubocop</span></li><li class="li3"><span class="s4">chefspec</span></li></ul></ul><li class="li3"><span class="s4">Integration Test Tools</span><ul class="ul2"><li class="li1"><span class="s5"> </span><span class="s2">Kitchen CI <span class="s3"><a href="http://kitchen.ci/" class="external-link" rel="nofollow">http://kitchen.ci/</a></span></span><ul class="ul2"><li class="li1">Starts a vagrant box, runs provisioning and executes tests</li></ul><ul class="ul3"><li class="li3"><span class="s4">Busser: test execution framework</span></li><li class="li1"><span class="s2">Bats: <a href="https://github.com/sstephenson/bats" class="external-link" rel="nofollow"><span class="s3">https://github.com/sstephenson/bats</span></a></span></li><li class="li1"><span class="s2">ansible plugin <a href="https://github.com/neillturner/kitchen-ansible" class="external-link" rel="nofollow"><span class="s3">https://github.com/neillturner/kitchen-ansible</span></a></span></li><li class="li3"><span class="s4">ServerSpec</span><ul class="ul3"><li class="li1"><span class="s6"><a href="http://rspec.info/documentation/" class="external-link" rel="nofollow">http://rspec.info/documentation/</a></span></li><li class="li1"><span class="s6"><a href="http://serverspec.org/" class="external-link" rel="nofollow">http://serverspec.org/</a></span></li></ul></li></ul></li><li class="li3"><span class="s4">Run ServerSpec without Kitchen:</span><ul class="ul3"><li class="li3"><span class="s4">have a look Rakefile in example project</span></li></ul></li></ul></li></ul><p class="p3"><span class="s4">Bats example:</span> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">@test &quot;mongo bla&quot; {
  output=$(&quot;cmd&quot;)
  status=$?
  test[]
}</pre>
</div></div><p> </p><p class="p3"><span class="s4">Serverspec example</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">require &#39;serverspec&#39;
 set :backend, :exec # run locally
 
describe &#39;ngnix&#39; do
 describe service &#39;ngnix&#39; do
  it { expect(subject).to be_running }
  it { expect(subject).to be_enabled }
 end
 
 describe port 80 do
  it { expect(subject).to be_listening }
 end
 
 describe file &#39;…&#39; do
  let(:content) {subject.content}  
  it { expect(subject).to exist }
  it { expect(subject).to be_file }
  it { expect(content).to include(&#39;...&#39;) }
 end
end
 
describe &#39;node&#39; do
 describe command &#39;node -v&#39; do
  it { expect(subject.stdout).to match(/.../)}
 end
end</pre>
</div></div><p class="p3"> </p><p class="p3"><span class="s4">Ideas:</span></p><ul class="ul1"><li class="li3"><span class="s4">run kitchen &amp; ansible in bamboo</span></li><ul class="ul2"><li class="li3"><span class="s4">provisioning &amp; admin</span></li></ul></ul>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jul 12, 2017 15:00</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
